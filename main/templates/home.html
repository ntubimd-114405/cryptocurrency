{% extends "base.html" %}
{% block title %}AIå¹£å¸‚é€š{% endblock %}
{% load static %}

{% block main %}
    {% load humanize %}
    
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    
        {% include "Advertising.html" %}
    <div class="carousel">
        <svg class = "svg1" width="600" height="300">
            <defs>
                <!-- å®šç¾©ç·šæ€§æ¼¸è®Š -->
                <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#87CEFA" stop-opacity="1" />
                    <stop offset="100%" stop-color="#87CEFA" stop-opacity="0" />
                </linearGradient>
            </defs>
            <!-- ç®¡é“å½¢ç‹€ -->
            <path id="motionPath" 
                d="M 20 50 
                    H 300
                    A 150 150 0 0 1 450 200
                    V 700
                    "  
                  stroke="url(#pathGradient)" stroke-width="150" fill="none">
            </path>
    
            <!-- çƒé«” -->
            <circle id="ball" cx="150" cy="600" r="60" fill="#6495ed"></circle>
        </svg>
        <div class="card-head">
            <h2 style = "color: white;">æ­¡è¿ä¾†åˆ°è™›æ“¬è²¨å¹£åˆ†æå¹³å°</h2>
            <p style = "color: white;">å³æ™‚æ›´æ–°çš„åŠ å¯†è²¨å¹£åƒ¹æ ¼èˆ‡å¸‚å ´æ•¸æ“šï¼ŒåŠ©æ‚¨åšå‡ºæ˜æ™ºçš„æ±ºç­–ã€‚</p>
        </div>
    
        <div class="card_invent-container">
            <div class="card_invent">
                <div class="card_invent-inner">
                    <div class="card_invent-face card_invent-front">
                        <img src="{% static 'images/btc-1.png' %}" class="btc" alt="">
                        <h3>è²¨å¹£è³‡æ–™</h3>
                        <p>æ­·å²æ•¸æ“š</p>
                        <a href="{% url 'crypto_list' %}"><button class="arrow-btn">â†’</button></a>
                    </div>
                    <div class="card_invent-face card_invent-back">
                        <h2>å¸‚å ´çµ±è¨ˆ</h2>
                        <p><strong>ç¸½å¸‚å€¼ (USD):</strong> <span id="total_market_cap">è¼‰å…¥ä¸­...</span></p>
                        <p><strong>24 å°æ™‚äº¤æ˜“é‡ (USD):</strong> <span id="total_24h_volume">è¼‰å…¥ä¸­...</span></p>
                        <p><strong>å¸‚å ç‡:</strong> <span id="btc_dominance">è¼‰å…¥ä¸­...</span> | <span id="eth_dominance">è¼‰å…¥ä¸­...</span> | <span id="other_dominance">è¼‰å…¥ä¸­...</span></p>
                    </div>
                </div>
            </div>
    
            <div class="card_invent">
                <div class="card_invent-inner">
                    <div class="card_invent-face card_invent-front">
                        <img src="{% static 'images/news.png' %}" class="new" alt="">
                        <h2>å¤–éƒ¨è³‡è¨Š</h2>
                        <p>æ–°èè³‡è¨Š</p>
                        <a href="{% url 'news_home' %}"><button class="arrow-btn">â†’</button></a>
                    </div>
                    <div class="card_invent-face card_invent-back">
                        <h3>åŠ å¯†å¸‚å ´å‹•æ…‹</h3>
                        <ul class = "ul">
                            <li>å³æ™‚æ–°è</li>
                            <li>é‡è¦äº‹ä»¶</li>
                            <li>å¸‚å ´è¶¨å‹¢è®ŠåŒ–</li>
                        </ul>
                    </div>
                </div>
            </div>
    
            <div class="card_invent">
                <div class="card_invent-inner">
                    <div class="card_invent-face card_invent-front">
                        <img src="{% static 'images/pointer.png' %}" class="point" alt="">
                        <h3>ç¶“æ¿ŸæŒ‡æ¨™</h3>
                        <p>æŠ•è³‡å·¥å…·</p>
                        <a href="{% url 'other_home' %}"><button class="arrow-btn">â†’</button></a>
                    </div>
                    <div class="card_invent-face card_invent-back">
                        <h3>é—œéµç¶“æ¿ŸæŒ‡æ¨™</h3>
                        <ul class = "ul">
                            <li>æå‡æ±ºç­–ç²¾æº–åº¦</li>
                            <li>é™ä½æŠ•è³‡é¢¨éšª</li>
                            <li>å…¨é¢å¸‚å ´åˆ†æ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h1>ç†±é–€åŠ å¯†è²¨å¹£</h1>

    <div class="button-container">
        <button onclick="showContent('info1')" class = "button">ä¸»æµå¹£</button>
        <button onclick="showContent('info2')" class = "button">æ¼²å¹…æ¦œ</button>
        <button onclick="showContent('info3')" class = "button">è·Œå¹…æ¦œ</button>
        <button onclick="showContent('info4')" class = "button">24hæˆäº¤é‡</button>
    </div>
    
    <div class="card-coin mb-3 active" id="info1" style="max-width: 60%;">
        
        <div class="row g-0">
            {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
            {% else %}
            <table class="table table-bordered table-hover">
                {% include 'table_header.html' %}
                <tbody>
                    {% for price in top_coins %}
                        <tr>
                            <td style="text-align: center; vertical-align: middle;">
                                <a href="{% url 'crypto_detail' price.pk %}">
                                    <img src="{{ price.coin.logo_url }}" alt="logo" class="coin-logo"><br>{{ price.coin.coinname }}
                                </a>
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.usd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.twd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.jpy|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.eur|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.volume_24h|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">
                                {% if price.change_24h > 0 %}
                                    <span style="color: red;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% elif price.change_24h < 0 %}
                                    <span style="color: green;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% else %}
                                    <span style="color: black;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.timestamp }}</td>
                            
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
        <a data-testid="Web_NewHomePage_HotCrypto_More" href="{% url 'crypto_list' %}" class="sc-8bd51ba2-2 RBQIy" id = "a">æ¢ç´¢æ›´å¤š</a>
    </div>

    <div class="card-coin mb-3" id="info2" style="max-width: 60%;">
        
        <div class="row g-0">
            {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
            {% else %}
            <table class="table table-bordered table-hover">
                {% include 'table_header.html' %}
                <tbody>
                    {% for price in increase_coins %}
                        <tr>
                            <td style="text-align: center; vertical-align: middle;">
                                <a href="{% url 'crypto_detail' price.pk %}">
                                    <img src="{{ price.coin.logo_url }}" alt="logo" class="coin-logo"><br>{{ price.coin.coinname }}
                                </a>
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.usd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.twd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.jpy|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.eur|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.volume_24h|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">
                                {% if price.change_24h > 0 %}
                                    <span style="color: red;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% elif price.change_24h < 0 %}
                                    <span style="color: green;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% else %}
                                    <span style="color: black;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.timestamp }}</td>
                            
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
        <a data-testid="Web_NewHomePage_HotCrypto_More" href="{% url 'crypto_list' %}" class="sc-8bd51ba2-2 RBQIy" id = "a">æ¢ç´¢æ›´å¤š</a>
    </div>

    <div class="card-coin mb-3" id="info3" style="max-width: 60%;">
        
        <div class="row g-0">
            {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
            {% else %}
            <table class="table table-bordered table-hover">
                {% include 'table_header.html' %}
                <tbody>
                    {% for price in decline_coins %}
                        <tr>
                            <td style="text-align: center; vertical-align: middle;">
                                <a href="{% url 'crypto_detail' price.pk %}">
                                    <img src="{{ price.coin.logo_url }}" alt="logo" class="coin-logo"><br>{{ price.coin.coinname }}
                                </a>
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.usd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.twd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.jpy|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.eur|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.volume_24h|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">
                                {% if price.change_24h > 0 %}
                                    <span style="color: red;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% elif price.change_24h < 0 %}
                                    <span style="color: green;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% else %}
                                    <span style="color: black;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.timestamp }}</td>
                            
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
        <a data-testid="Web_NewHomePage_HotCrypto_More" href="{% url 'crypto_list' %}" class="sc-8bd51ba2-2 RBQIy" id = "a">æ¢ç´¢æ›´å¤š</a>
    </div>

    <div class="card-coin mb-3" id="info4" style="max-width: 60%;">
        
        <div class="row g-0">
            {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
            {% else %}
            <table class="table table-bordered table-hover">
                {% include 'table_header.html' %}
                <tbody>
                    {% for price in volume %}
                        <tr>
                            <td style="text-align: center; vertical-align: middle;">
                                <a href="{% url 'crypto_detail' price.pk %}">
                                    <img src="{{ price.coin.logo_url }}" alt="logo" class="coin-logo"><br>{{ price.coin.coinname }}
                                </a>
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.usd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.twd|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.jpy|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.eur|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.volume_24h|floatformat:2|intcomma }}</td>
                            <td style="text-align: center; vertical-align: middle;">
                                {% if price.change_24h > 0 %}
                                    <span style="color: red;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% elif price.change_24h < 0 %}
                                    <span style="color: green;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% else %}
                                    <span style="color: black;">{{ price.change_24h|floatformat:2 }}%</span>
                                {% endif %}
                            </td>
                            <td style="text-align: center; vertical-align: middle;">{{ price.timestamp }}</td>
                            
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
        <a data-testid="Web_NewHomePage_HotCrypto_More" href="{% url 'crypto_list' %}" class="sc-8bd51ba2-2 RBQIy" id = "a">æ¢ç´¢æ›´å¤š</a>
    </div>

    <div class="container-home">
        <div class="left">
            <div class="signin-card">
              <h2>ğŸ æ¯æ—¥ç°½åˆ°</h2>
                {% if sign_in_record %}
                
                    <p>ä»Šå¤©æ—¥æœŸï¼š{{ today }}</p>
                    <p>ä¸Šæ¬¡ç°½åˆ°ï¼š{{ sign_in_record.last_sign_in_date }}</p>
                    <p>é€£çºŒç°½åˆ°å¤©æ•¸ï¼š{{ sign_in_record.consecutive_sign_in_count }}</p>
                    <p>ç¸½ç°½åˆ°æ¬¡æ•¸ï¼š{{ sign_in_record.sign_in_count }}</p>

                {% if sign_in_record.last_sign_in_date == today %}
                    <p class="text-success">âœ… ä»Šå¤©å·²ç°½åˆ°</p>
                {% else %}
                    <p class="text-danger">âŒ ä»Šå¤©å°šæœªç°½åˆ°</p>
                {% endif %}
                
                {% else %}
                    <p>å°šæœªæœ‰ç°½åˆ°ç´€éŒ„ã€‚</p>
                {% endif %}
                <div class="progress-bar">
                    <div class="progress" style="height: 100%; width: {{ progress_percentage }}%; background-color: #4caf50; transition: width 0.5s;"></div>
                </div>
                
                {% if user.signin.last_sign_in_date != today %}
                        <form action="{% url 'sign_in' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="signin-btn">ç«‹å³ç°½åˆ°</button>
                        </form>
                {% endif %}
              
            </div>
          </div>
        
        <div class="carousel1">
            <h1>æŠ•è³‡æ¯”ç‰¹å¹£ï¼Œå¹¾åˆ†é˜å°±èƒ½é–‹å•Ÿæœªä¾†ï¼</h1>
            <p style = "text-align: center;">æŒ‰ç…§ä»¥ä¸‹ç°¡å–®æ­¥é©Ÿï¼Œç«‹å³è¨»å†Šä¸¦é–‹å§‹æ‚¨çš„æ¯”ç‰¹å¹£æŠ•è³‡ä¹‹æ—…ã€‚</p>
    
            <ol class="rounded-list">
                <li class="li">
                    <h3 class="step-title">è¨»å†Šæˆç‚ºæœƒå“¡</h3> 
                    <span class="step-description">
                        åœ¨æˆ‘å€‘çš„ç¶²ç«™ä¸Šè¨»å†Šä¸€å€‹å¸³æˆ¶ï¼Œä¸¦å¡«å¯«åŸºæœ¬è³‡æ–™ä»¥å®Œæˆè¨»å†Šã€‚
                    </span>
                </li>
                <li class="li">
                    <h3 class="step-title">ç€è¦½å¹£ç¨®åŸºæœ¬è³‡æ–™</h3> 
                    <span class="step-description">
                        æä¾›è¶…é 500 ç¨®åŠ å¯†è²¨å¹£çš„å®Œæ•´è³‡è¨Šï¼Œå¹«åŠ©æ‚¨å¿«é€ŸæŒæ¡å¸‚å ´æ¦‚æ³ã€‚
                    </span>
                </li>
                <li class="li">
                    <h3 class="step-title">å®ŒæˆæŠ•è³‡å»ºè­°å•å·</h3> 
                    <span class="step-description">
                        é€éç°¡å–®å•å·ï¼ŒAI æœƒæ ¹æ“šæ‚¨çš„é¢¨éšªåå¥½èˆ‡æŠ•è³‡ç›®æ¨™ï¼Œçµ¦å‡ºå°ˆå±¬æŠ•è³‡å»ºè­°ã€‚
                    </span>
                </li>
                <li class="li fourth-step">
                    <h3 class="step-title">èˆ‡ AI æ©Ÿå™¨äººäº’å‹•</h3> 
                    <span class="step-description">
                        éš¨æ™‚å‘ AI æ©Ÿå™¨äººæå•ï¼Œç²å¾—å³æ™‚çš„å¹£ç¨®è³‡è¨Šèˆ‡æŠ•è³‡æ–¹å‘åƒè€ƒã€‚
                    </span>

            </div>
        </div>
    </div>

    
    
    <div class="carousel2">
        
        <div id="animation-container">
            <h1 style = "color: white; padding-top: 10px;">é–‹å•Ÿæ‚¨çš„<br>è²¡å¯Œç„¡é™å®‡å®™</h1>
            <a href="{% url 'register' %}">
                <button class="register">
                    ç«‹å³è¨»å†Š
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        fill-rule="evenodd"
                        d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z"
                        clip-rule="evenodd"
                    ></path>
                    </svg>
                </button>
            </a>
            
            <!-- å·¦ä¸‹è§’ç®¡é“ -->
            <svg id="leftPipe" viewBox="0 0 800 600">
                <path id="leftPath" 
                    d="M 0 350 
                       H 250 
                       A 100 100 0 0 1 350 450 
                       V 600" 
                    stroke="#3b82f6" 
                    stroke-width="100" 
                    fill="none" 
                    stroke-linecap="round"></path>
                <circle id="ballLeft" cx="0" cy="350" r="40" fill="#93c5fd"></circle>
            </svg>
        
            <!-- å³ä¸Šè§’ç®¡é“ -->
            <svg id="rightPipe" viewBox="0 0 800 600">
                <path id="rightPath" 
                    d="M 800 250 
                       H 550 
                       A 100 100 0 0 1 450 150 
                       V 0" 
                    stroke="#3b82f6" 
                    stroke-width="100" 
                    fill="none" 
                    stroke-linecap="round"></path>
                <circle id="ballRight" cx="800" cy="250" r="40" fill="#93c5fd"></circle>
            </svg>
            
            <svg id = "pipe" width="200" height="300" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <image href="{% static 'images/crypto.png' %}" x="65" y="100" width="100" height="100" class="moving-image"/>

                <!-- æ°´ç®¡ä¸»é«” (æ”¾åœ¨æœ€ä¸Šå±¤ï¼Œè“‹ä½åœ–ç‰‡) -->
                <rect x="65" y="50" width="100" height="200" fill="rgb(33, 107, 246)" stroke-width="4" />
            
                <!-- æ°´ç®¡é–‹å£ (æ”¾åœ¨æœ€åº•å±¤) -->
                <rect x="50" y="30" width="130" height="50" fill="rgb(70, 115, 241)" stroke-width="4" />
                
            </svg>
        </div>
    </div>
    <button id="backToTop" class="back-to-top">â–² å›åˆ°é ‚éƒ¨</button>

    <script src = "{% static 'js/home.js' %}"></script>
{% endblock %}

